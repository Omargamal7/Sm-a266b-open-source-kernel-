import{H as X,F as Z,g as N}from"./fade-4ApaDT9x.js";import{b as Q,a as x,c as ee,o as se,y as te,g as oe,l as ae,p as ne,d as ie,r as de,w as _e,e as ce,s as ue,f as le}from"./creditsjs-BfjoyHvA.js";import"./i18n-BqJdyLAD.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function _(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerPolicy&&(a.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?a.credentials="include":t.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(t){if(t.ep)return;t.ep=!0;const a=_(t);fetch(t.href,a)}})();let re=0;function fe(s){return`${s}_callback_${Date.now()}_${re++}`}function $(s,o){return typeof o>"u"&&(o={}),new Promise((_,n)=>{const t=fe("exec");window[t]=(l,f,g)=>{_({errno:l,stdout:f,stderr:g}),a(t)};function a(l){delete window[l]}try{ksu.exec(s,JSON.stringify(o),t)}catch(l){n(l),a(t)}})}function i(s){ksu.toast(s)}const me="/assets/cyan1-BWTE1JdY.png",he="/assets/orange1-CeH2ZIyG.png",ge="/assets/yellow1-Bmr_vY2u.png",y=document.getElementById("backgroundCanvas"),k=y.getContext("2d");function D(){y.width=window.innerWidth,y.height=window.innerHeight,G()}const F=[],M=[],ve=100,H=[Q,x,x,ee,me,se,he,te,ge,oe,ae,ne,ie,de,_e,ce];H.length;function pe(){F.length=0;for(let s=0;s<ve;s++)F.push({x:Math.random()*y.width,y:Math.random()*y.height,radius:Math.random()*2,speed:Math.random()*.5})}function be(s,o){return[...s].sort(()=>.5-Math.random()).slice(0,o)}function G(){M.length=0,be(H,6).forEach(o=>{const _=new Image;_.src=o,_.onload=()=>{M.push({img:_,x:Math.random()*y.width,y:Math.random()*y.height,width:50,height:60,rotation:Math.random()*Math.PI*2,rotationSpeed:(Math.random()-.5)*.02,speedX:(Math.random()-.5)*1.5,speedY:(Math.random()-.5)*1.5})}})}function K(){k.clearRect(0,0,y.width,y.height),k.fillStyle="white",F.forEach(s=>{k.beginPath(),k.arc(s.x,s.y,s.radius,0,Math.PI*2),k.fill(),s.y+=s.speed,s.y>y.height&&(s.y=0,s.x=Math.random()*y.width)}),M.forEach(s=>{k.save(),k.translate(s.x+s.width/2,s.y+s.height/2),k.rotate(s.rotation),k.drawImage(s.img,-s.width/2,-s.height/2,s.width,s.height),k.restore(),s.x+=s.speedX,s.y+=s.speedY,s.rotation+=s.rotationSpeed,s.x>y.width&&(s.x=-s.width),s.x+s.width<0&&(s.x=y.width),s.y>y.height&&(s.y=-s.height),s.y+s.height<0&&(s.y=y.height)}),requestAnimationFrame(K)}window.addEventListener("resize",D);D();pe();G();K();const B="/data/adb/ksu/susfs4ksu",T="/data/adb/modules/susfs4ksu",d="/data/adb/susfs4ksu",p="/data/adb/ksu/bin/ksu_susfs",I=O(await e(`cat ${d}/config.sh`));var L=await e(`grep version= ${T}/module.prop | cut -d '=' -f 2`);await e(`echo "${L}" | cut -d '-' -f 1 | sed 's/^v//; s/\\.//g'`);var u={main:await e(`echo "${L}" | cut -d '-' -f 1 | sed 's/^v//;' | cut -d '.' -f 1`),sub:await e(`echo "${L}" | cut -d '-' -f 1 | sed 's/^v//;' | cut -d '.' -f 2`),patch:await e(`echo "${L}" | cut -d '-' -f 1 | sed 's/^v//;' | cut -d '.' -f 3`)};const ye=document.getElementById("susfs_version");ye.innerHTML=L;const E=await e(`${p} show enabled_features`),R=await e(`${p} show variant`);(u.main>=1&&u.sub>=5&&u.patch>=3||u.main>=2)&&document.getElementById("susfs_kernel_status").classList.remove("hidden");await e(`[ -f ${B}/logs/susfs_active ] && echo true || echo false`)=="false"&&document.getElementById("susfs_nos_dialog").showModal();var ke=await e(`[ -s ${B}/logs/susfs.log ] && echo false || echo true`),U=O(await e(`cat ${B}/susfs_stats.txt`));ke=="true"&&(U=O(await e(`cat ${B}/susfs_stats1.txt`)),i("/data/adb/ksu/susfs4ksu/logs/susfs.log is empty/missing."),i("Fallback to stats executed from the module."));function O(s){return s.split(`
`).filter(_=>_.includes("=")).reduce((_,n)=>{const[t,a]=n.split("=").map(l=>l.trim());return a.startsWith("'")&&a.endsWith("'")||a.startsWith('"')&&a.endsWith('"')?_[t]=a.substring(1,a.length-1):_[t]=isNaN(Number(a))?a:Number(a),_},{})}document.getElementById("sus_path").innerHTML=U.sus_path;document.getElementById("sus_map").innerHTML=U.sus_map;document.getElementById("sus_mount").innerHTML=U.sus_mount;document.getElementById("try_umount").innerHTML=U.try_umount;document.getElementById("kernel_version").innerHTML=await e("uname -a | cut -d' ' -f3-");var C=I.sus_su;document.getElementById("sus_su_152");const Se=document.getElementById("sus_su_154"),we=document.getElementById("sus_su_142"),Ee=document.getElementById("sus_su_1");C==-1?(sus_su.removeAttribute("checked"),sus_su.setAttribute("disabled",""),enable_sus_su.removeAttribute("checked"),enable_sus_su.setAttribute("disabled","")):((u.main>=1&&u.sub>=5||u.main>=2)&&C==1&&Ee.classList.remove("hidden"),we.classList.remove("hidden"),P(I));(u.main>=1&&u.sub>=5&&u.patch>=4||u.main>=2)&&(Se.classList.remove("hidden"),Y(I,E));const z=new X.Core({transitions:{default:Z}});z.on("NAVIGATE_IN",async({to:s,from:o,trigger:_,location:n})=>{var t=window.location.pathname;window.i18n&&(window.i18n.getCurrentLanguage(),window.i18n.applyTranslationsToNewContent(s.view)),t==="/credits.html"&&(ue(),le())});z.on("NAVIGATE_END",async({to:s,from:o,trigger:_,location:n})=>{const t=O(await e(`cat ${d}/config.sh`));var a=window.location.pathname;a==="/index.html"?(console.log("in index"),W(),J(),j(),V(t),q(t),(u.main>=1&&u.sub>=5&&u.patch>=4||u.main>=2)&&Y(t,E),P(t)):a==="/custom.html"?(Le(t),Ue(t),Oe(),Ne(),$e(),Be(),Te(E)):a==="/status.html"&&Fe(E)});async function e(s){return new Promise((o,_)=>{const n=`exec_callback_${Date.now()}`;window[n]=(t,a,l)=>{delete window[n],t===0?o(a):(console.error(`Error executing command: ${l}`),_(l))};try{ksu.exec(s,"{}",n)}catch(t){console.error(`Execution error: ${t}`),_(t)}})}async function Ie(s,o){const _=document.getElementById("susfs_update_dialog"),n=document.getElementById("susfs_update_btn"),t=document.getElementById("susfs_update"),a=document.getElementById("susfs_updating"),l=document.getElementById("susfs_update_desc1"),f=document.getElementById("susfs_update_desc2"),g=document.getElementById("susfs_loading_icon"),c=document.getElementById("susfs_update_buttons");_.showModal(),n.addEventListener("click",async function(){t.classList.add("hidden"),l.classList.add("hidden"),f.classList.add("hidden"),c.classList.add("hidden"),g.classList.remove("hidden"),a.classList.remove("hidden"),setTimeout(async()=>{try{await e(`sh ${T}/susfs-bin-update.sh ${s.main.toString()} ${s.sub.toString()} ${s.patch.toString()} ${o.toLowerCase()}`),_.close(),i(`SUSFS binary updated to version v${s.main}.${s.sub}.${s.patch} for ${o} kernel!`)}catch{i("Error updating SUSFS binary!")}},500)})}async function P(s){const o=document.getElementById("sus_su"),_=document.getElementById("enable_sus_su");var n=s;n.sus_su==1||n.sus_su==2?o.addEventListener("click",function(){n.sus_su_active==1||n.sus_su_active==2?(console.log("false"),n.sus_su_active=0,e(`${p} sus_su 0`),$(`sed -i 's/sus_su_active=.*/sus_su_active=0/' ${d}/config.sh`),i("sus su off no need to reboot"),o.removeAttribute("checked")):(console.log("true"),u.main>=1&&u.sub>=5?(n.sus_su_active=2,e(`${p} sus_su 2`),$(`sed -i 's/sus_su_active=.*/sus_su_active=2/' ${d}/config.sh`)):(n.sus_su_active=1,e(`${p} sus_su 1`),$(`sed -i 's/sus_su_active=.*/sus_su_active=1/' ${d}/config.sh`)),i("sus su on no need to reboot"),o.setAttribute("checked","checked"))}):(o.checked=!1,_.checked=!1,o.setAttribute("disabled","")),n.sus_su_active==0&&(o.checked=!1),_.addEventListener("click",async function(){n.sus_su==1||n.sus_su==2?(console.log("false"),n.sus_su=0,i("Reboot to take effect"),e(`sed -i 's/sus_su=.*/sus_su=0/' ${d}/config.sh`),$(`sed -i 's/sus_su_active=.*/sus_su_active=0/' ${d}/config.sh`),_.checked=!1,o.setAttribute("disabled","")):(console.log("true"),i("Reboot to take effect"),u.main>=1&&u.sub>=5?(n.sus_su=2,e(`sed -i 's/sus_su=.*/sus_su=2/' ${d}/config.sh`)):(n.sus_su=1,e(`sed -i 's/sus_su=.*/sus_su=1/' ${d}/config.sh`)),_.checked="checked",o.removeAttribute("disabled",""))})}async function Y(s,o){const _=document.getElementById("auto_mount"),n=document.getElementById("auto_bind"),t=document.getElementById("auto_umount_bind"),a=document.getElementById("auto_try_umount"),l=document.getElementById("try_umount_zygote"),f=document.getElementById("hide_sus_mnts_for_all_procs"),g=document.getElementById("umount_for_zygote_iso_service");var c=await e("[ -f data/adb/susfs_no_auto_add_sus_ksu_default_mount ] && echo true || echo false"),r=await e("[ -f data/adb/susfs_no_auto_add_sus_bind_mount ] && echo true || echo false"),b=await e("[ -f data/adb/susfs_no_auto_add_try_umount_for_bind_mount ] && echo true || echo false"),m=await e("[ -f data/adb/susfs_umount_for_zygote_system_process ] && echo true || echo false"),h=s;c=="true"&&(_.checked=!1),r=="true"&&(n.checked=!1),b=="true"?t.checked=!1:(t.checked="checked",h.auto_try_umount==!0&&o.includes("CONFIG_KSU_SUSFS_AUTO_ADD_TRY_UMOUNT_FOR_BIND_MOUNT")&&(await e(`sed -i 's/auto_try_umount=.*/auto_try_umount=0/' ${d}/config.sh`),a.checked=!1,h.auto_try_umount=!1)),h.auto_try_umount==!0?(a.checked="checked",b=="false"&&o.includes("CONFIG_KSU_SUSFS_AUTO_ADD_TRY_UMOUNT_FOR_BIND_MOUNT")&&(await e("touch data/adb/susfs_no_auto_add_try_umount_for_bind_mount"),b="true",t.checked=!1)):a.checked=!1,m=="false"&&(l.checked=!1),u.main>=1&&u.sub>=5&&u.patch>=7||u.main>=2?(f.removeAttribute("disabled"),h.hide_sus_mnts_for_all_procs==!0?f.checked="checked":f.checked=!1):f.checked=!1,(u.main>=1&&u.sub>=5&&u.patch>=8||u.main>=2)&&await e(`${p} umount_for_zygote_iso_service ${h.umount_for_zygote_iso_service} > /dev/null 2>&1 && echo true || echo false`)=="true"?(g.removeAttribute("disabled"),h.umount_for_zygote_iso_service==!0?g.checked="checked":g.checked=!1):g.checked=!1,o.includes("CONFIG_KSU_SUSFS_AUTO_ADD_SUS_KSU_DEFAULT_MOUNT")==!1&&(_.checked=!1,_.setAttribute("disabled","")),o.includes("CONFIG_KSU_SUSFS_AUTO_ADD_SUS_BIND_MOUNT")==!1&&(n.checked=!1,n.setAttribute("disabled","")),o.includes("CONFIG_KSU_SUSFS_AUTO_ADD_TRY_UMOUNT_FOR_BIND_MOUNT")==!1&&(t.checked=!1,t.setAttribute("disabled","")),o.includes("CONFIG_KSU_SUSFS_TRY_UMOUNT")==!1&&(l.checked=!1,l.setAttribute("disabled",""),u.main==1&&u.sub>=5&&u.patch>=5&&(a.checked=!1,a.setAttribute("disabled",""))),_.addEventListener("click",async function(){c=await e("[ -f data/adb/susfs_no_auto_add_sus_ksu_default_mount ] && echo true || echo false"),c=="true"?(await e("rm -f data/adb/susfs_no_auto_add_sus_ksu_default_mount"),c="false",i("Reboot to take effect")):(await e("touch data/adb/susfs_no_auto_add_sus_ksu_default_mount"),c="true",i("Reboot to take effect"))}),n.addEventListener("click",async function(){r=await e("[ -f data/adb/susfs_no_auto_add_sus_bind_mount ] && echo true || echo false"),r=="true"?(await e("rm -f data/adb/susfs_no_auto_add_sus_bind_mount"),r="false",i("Reboot to take effect")):(await e("touch data/adb/susfs_no_auto_add_sus_bind_mount"),r="true",i("Reboot to take effect"))}),t.addEventListener("click",async function(){b=await e("[ -f data/adb/susfs_no_auto_add_try_umount_for_bind_mount ] && echo true || echo false"),b=="true"?(await e("rm -f data/adb/susfs_no_auto_add_try_umount_for_bind_mount"),b="false",h.auto_try_umount==1&&(await e(`sed -i 's/auto_try_umount=.*/auto_try_umount=0/' ${d}/config.sh`),a.checked=!1,h.auto_try_umount=!1,i("Auto try umount (userspace) disabled as auto umount for bind mount is enabled")),i("Reboot to take effect")):(await e("touch data/adb/susfs_no_auto_add_try_umount_for_bind_mount"),b="true",i("Reboot to take effect"))}),a.addEventListener("click",async function(){h.auto_try_umount==1?(await e(`sed -i 's/auto_try_umount=.*/auto_try_umount=0/' ${d}/config.sh`),h.auto_try_umount=0,a.checked=!1,i("Reboot to take effect")):(await e(`sed -i 's/auto_try_umount=.*/auto_try_umount=1/' ${d}/config.sh`),h.auto_try_umount=1,o.includes("CONFIG_KSU_SUSFS_AUTO_ADD_TRY_UMOUNT_FOR_BIND_MOUNT")&&b=="false"&&(await e("touch data/adb/susfs_no_auto_add_try_umount_for_bind_mount"),b="true",t.checked=!1,i("Auto umount for bind mount disabled as auto try umount (userspace) is enabled")),i("Reboot to take effect"))}),l.addEventListener("click",async function(){m=await e("[ -f data/adb/susfs_umount_for_zygote_system_process ] && echo true || echo false"),m=="true"?(await e("rm -f data/adb/susfs_umount_for_zygote_system_process"),i("Reboot to take effect")):(await e("touch data/adb/susfs_umount_for_zygote_system_process"),i("Reboot to take effect"))}),g.addEventListener("click",async function(){h.umount_for_zygote_iso_service==!0?(await e(`sed -i 's/umount_for_zygote_iso_service=.*/umount_for_zygote_iso_service=0/' ${d}/config.sh`),await e(`${p} umount_for_zygote_iso_service 0`),h.umount_for_zygote_iso_service=!1,i("Try umount for zygote isolation service disabled! No need to reboot")):(await e(`sed -i 's/umount_for_zygote_iso_service=.*/umount_for_zygote_iso_service=1/' ${d}/config.sh`),await e(`${p} umount_for_zygote_iso_service 1`),h.umount_for_zygote_iso_service=!0,i("Try umount for zygote isolation service enabled! No need to reboot"))}),f.addEventListener("click",async function(){h.hide_sus_mnts_for_all_procs==!0?(await e(`sed -i 's/hide_sus_mnts_for_all_procs=.*/hide_sus_mnts_for_all_procs=0/' ${d}/config.sh`),await e(`${p} hide_sus_mnts_for_all_procs 0`),h.hide_sus_mnts_for_all_procs=0,i("Hide SUS mounts for all processes disabled! No need to reboot"),f.checked=!1):(await e(`sed -i 's/hide_sus_mnts_for_all_procs=.*/hide_sus_mnts_for_all_procs=1/' ${d}/config.sh`),await e(`${p} hide_sus_mnts_for_all_procs 1`),h.hide_sus_mnts_for_all_procs=1,i("Hide SUS mounts for all processes enabled! No need to reboot"),f.checked="checked")})}async function V(s){document.getElementById("kernel_version").innerHTML=await e("uname -a | cut -d' ' -f3-");const o=document.getElementById("set_uname"),_=document.getElementById("uname-spoof-on-boot"),n=document.getElementById("uname-spoof-on-postfsdata"),t=document.getElementById("uname-at-postfs"),a=document.getElementById("confirm_modal"),l=document.getElementById("modal_confirm"),f=document.getElementById("modal_cancel");document.getElementById("modal_message");const g=document.querySelector("main");var c=document.getElementById("sus_uname"),r=document.getElementById("sus_uname_build"),b=document.getElementById("sus_uname_checkbox"),m=document.getElementById("sus_uname_build_checkbox"),h=document.getElementById("spoofed_kernel_version"),w=document.getElementById("spoofed_kernel_build");const v=s;h.innerHTML=v.kernel_version,w.innerHTML=v.kernel_build,v.spoof_uname>0?(_.checked="checked",t.classList.remove("hidden")):(_.checked=!1,t.classList.add("hidden")),v.spoof_uname>1?n.checked="checked":n.checked=!1,o.addEventListener("click",async function(){c=document.getElementById("sus_uname"),r=document.getElementById("sus_uname_build"),b=document.getElementById("sus_uname_checkbox"),m=document.getElementById("sus_uname_build_checkbox"),c.value.includes(" ")&&b.checked==!0?i("Spaces are not allowed in the input!"):b.checked==!0&&m.checked==!1?(c.value==""?(e(`${p} set_uname 'default' '${v.kernel_build}'`),await e(`sed -i 's/kernel_version=.*/kernel_version="default"/' ${d}/config.sh`),document.getElementById("kernel_version").innerHTML=await e("uname -a | cut -d' ' -f3-"),v.kernel_version="default",h.innerHTML="default",o.blur()):(e(`${p} set_uname '${c.value}' '${v.kernel_build}'`),await e(`sed -i 's/kernel_version=.*/kernel_version="${c.value}"/' ${d}/config.sh`),v.kernel_version=c.value,h.innerHTML=c.value,o.blur()),c.value=""):b.checked==!1&&m.checked==!0?(r.value==""?(e(`${p} set_uname '${v.kernel_version}' 'default'`),await e(`sed -i 's/kernel_build=.*/kernel_build="default"/' ${d}/config.sh`),v.kernel_build="default",w.innerHTML="default",o.blur()):(e(`${p} set_uname '${v.kernel_version}' '${r.value}'`),await e(`sed -i 's/kernel_build=.*/kernel_build="${r.value}"/' ${d}/config.sh`),v.kernel_build=r.value,w.innerHTML=r.value,o.blur()),r.value=""):b.checked==!0&&m.checked==!0&&(c.value==""&&r.value==""?(console.log("default kernel version"),e(`${p} set_uname 'default' 'default'`),v.kernel_version="default",v.kernel_build="default",await e(`sed -i 's/kernel_version=.*/kernel_version="default"/' ${d}/config.sh`),await e(`sed -i 's/kernel_build=.*/kernel_build="default"/' ${d}/config.sh`),document.getElementById("kernel_version").innerHTML=await e("uname -a | cut -d' ' -f3-"),h.innerHTML="default",w.innerHTML="default",o.blur()):(console.log(`sets to ${c.value}`),r.value==""?(v.kernel_version=c.value,v.kernel_build="default",e(`${p} set_uname '${c.value}' 'default'`),await e(`sed -i 's/kernel_version=.*/kernel_version="${c.value}"/' ${d}/config.sh`),await e(`sed -i 's/kernel_build=.*/kernel_build="default"/' ${d}/config.sh`),h.innerHTML=c.value,w.innerHTML="default"):c.value==""?(v.kernel_version="default",v.kernel_build=r.value,e(`${p} set_uname 'default' '${r.value}'`),await e(`sed -i 's/kernel_version=.*/kernel_version="default"/' ${d}/config.sh`),await e(`sed -i 's/kernel_build=.*/kernel_build="${r.value}"/' ${d}/config.sh`),h.innerHTML="default",w.innerHTML=r.value):(v.kernel_version=c.value,v.kernel_build=r.value,e(`${p} set_uname '${c.value}' '${r.value}'`),await e(`sed -i 's/kernel_version=.*/kernel_version="${c.value}"/' ${d}/config.sh`),await e(`sed -i 's/kernel_build=.*/kernel_build="${r.value}"/' ${d}/config.sh`),h.innerHTML=c.value,w.innerHTML=r.value)),c.value="",r.value=""),document.getElementById("kernel_version").innerHTML=await e("uname -a | cut -d' ' -f3-"),o.blur()}),_.addEventListener("change",async function(S){const A=document.getElementById("uname-at-postfs");S.preventDefault(),v.spoof_uname<1?(await e(`sed -i 's/spoof_uname=.*/spoof_uname=1/' ${d}/config.sh`),v.spoof_uname=1,i("Reboot to take effect"),A.classList.remove("hidden")):(await e(`sed -i 's/spoof_uname=.*/spoof_uname=0/' ${d}/config.sh`),v.spoof_uname=0,n.checked=!1,i("Reboot to take effect"),A.classList.add("hidden"))}),n.addEventListener("change",async function(S){S.preventDefault(),v.spoof_uname<2?a.showModal():await e(`sed -i 's/spoof_uname=.*/spoof_uname=1/' ${d}/config.sh`)}),l.addEventListener("click",async function(){const S=document.getElementById("uname-spoof-on-postfsdata");S.checked="checked",await e(`sed -i 's/spoof_uname=.*/spoof_uname=2/' ${d}/config.sh`),v.spoof_uname=2,i("Reboot to take effect"),a.close()}),f.addEventListener("click",async function(){const S=document.getElementById("uname-spoof-on-postfsdata");S.checked=!1,a.close()}),c.addEventListener("focus",()=>{g.style.paddingBottom="350px",c.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}),c.addEventListener("blur",S=>{setTimeout(()=>{document.activeElement!==r&&N.to(g,{duration:.5,paddingBottom:"0px",ease:"power1.out"})},0)}),r.addEventListener("focus",()=>{g.style.paddingBottom="350px",r.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}),r.addEventListener("blur",S=>{setTimeout(()=>{document.activeElement!==c&&N.to(g,{duration:.5,paddingBottom:"0px",ease:"power1.out"})},0)})}async function q(s){var o=document.getElementById("susfs_log");s.susfs_log===1?o.setAttribute("checked","checked"):o.removeAttribute("checked"),o.addEventListener("click",async function(){o.hasAttribute("checked")?(console.log("false"),i("Reboot to take effect"),await e(`sed -i 's/susfs_log=1/susfs_log=0/' ${d}/config.sh`),o.removeAttribute("checked")):(console.log("true"),i("Reboot to take effect"),await e(`sed -i 's/susfs_log=0/susfs_log=1/' ${d}/config.sh`),o.setAttribute("checked","checked"))})}async function Le(s){const o=document.getElementById("hide_gapps"),_=document.getElementById("hide_revanced"),n=document.getElementById("spoof_cmdline"),t=document.getElementById("hide_ksu_loop"),a=document.getElementById("force_hide_lsposed"),l=document.getElementById("avc_log_spoofing"),f=document.getElementById("emulate_vold_app_data");var g=!0;const c=s;try{await e(`${p} enable_avc_log_spoofing ${c.avc_log_spoofing}`)}catch(r){console.error("Error enabling AVC log spoofing:",r),g=!1}c.hide_gapps==!0?o.checked="checked":o.checked=!1,c.hide_revanced==!0?_.checked="checked":_.checked=!1,c.spoof_cmdline==!0?n.checked="checked":n.checked=!1,c.hide_loops==!0?t.checked="checked":t.checked=!1,c.force_hide_lsposed==!0?a.checked="checked":a.checked=!1,u.main==1&&u.sub==5&&u.patch<=8?(f.checked=!1,f.disabled=!0):c.emulate_vold_app_data==!0?f.checked="checked":f.checked=!1,u.main==1&&u.sub==5&&u.patch<=8||!g?l.disabled=!0:c.avc_log_spoofing==!0?l.checked="checked":l.checked=!1,o.addEventListener("click",async function(){c.hide_gapps==!0?(await e(`sed -i 's/hide_gapps=1/hide_gapps=0/' ${d}/config.sh`),c.hide_gapps=!1,i("Reboot to take effect")):(await e(`sed -i 's/hide_gapps=0/hide_gapps=1/' ${d}/config.sh`),c.hide_gapps==!0,i("Reboot to take effect"))}),_.addEventListener("click",async function(){c.hide_revanced==!0?(await e(`sed -i 's/hide_revanced=1/hide_revanced=0/' ${d}/config.sh`),c.hide_revanced=!1,i("Reboot to take effect")):(await e(`sed -i 's/hide_revanced=0/hide_revanced=1/' ${d}/config.sh`),c.hide_revanced=!0,i("Reboot to take effect"))}),n.addEventListener("click",async function(){c.spoof_cmdline==!0?(await e(`sed -i 's/spoof_cmdline=1/spoof_cmdline=0/' ${d}/config.sh`),c.spoof_cmdline=!1,i("Reboot to take effect")):(await e(`sed -i 's/spoof_cmdline=0/spoof_cmdline=1/' ${d}/config.sh`),c.spoof_cmdline=!0,i("Reboot to take effect"))}),t.addEventListener("click",async function(){c.hide_loops==!0?(await e(`sed -i 's/hide_loops=1/hide_loops=0/' ${d}/config.sh`),c.hide_loops=!1,i("Reboot to take effect")):(await e(`sed -i 's/hide_loops=0/hide_loops=1/' ${d}/config.sh`),c.hide_loops=!0,i("Reboot to take effect"))}),a.addEventListener("click",async function(){c.force_hide_lsposed==!0?(await e(`sed -i 's/force_hide_lsposed=1/force_hide_lsposed=0/' ${d}/config.sh`),c.force_hide_lsposed=!1,i("Reboot to take effect")):(await e(`sed -i 's/force_hide_lsposed=0/force_hide_lsposed=1/' ${d}/config.sh`),c.force_hide_lsposed=!0,i("Reboot to take effect"))}),l.addEventListener("click",async function(){c.avc_log_spoofing==!0?(await e(`sed -i 's/avc_log_spoofing=.*/avc_log_spoofing=0/' ${d}/config.sh`),await e(`${p} enable_avc_log_spoofing 0`),c.avc_log_spoofing=!1,i("AVC Log Spoofing off! no need to reboot")):(await e(`sed -i 's/avc_log_spoofing=.*/avc_log_spoofing=1/' ${d}/config.sh`),await e(`${p} enable_avc_log_spoofing 1`),c.avc_log_spoofing=!0,i("AVC Log Spoofing on! no need to reboot"))}),f.addEventListener("click",async function(){c.emulate_vold_app_data==!0?(await e(`sed -i 's/emulate_vold_app_data=.*/emulate_vold_app_data=0/' ${d}/config.sh`),await e(`${p} enable_vold_app_data 0`),c.emulate_vold_app_data=!1,i("Reboot to take effect")):(await e(`sed -i 's/emulate_vold_app_data=.*/emulate_vold_app_data=1/' ${d}/config.sh`),await e(`${p} enable_vold_app_data 1`),c.emulate_vold_app_data=!0,i("Reboot to take effect"))})}async function Ue(s){const o=document.getElementById("hide_custom_rom"),_=document.getElementById("custom_rom_levels"),n=document.getElementById("hide_level"),t=document.getElementById("hide_level1"),a=document.getElementById("hide_level2"),l=document.getElementById("hide_level3"),f=document.getElementById("hide_level4"),g=document.getElementById("hide_level5"),c=document.getElementById("hide_vendor_sepolicy"),r=document.getElementById("hide_compat_matrix"),b=document.getElementById("fake_service_list"),m=s;m.hide_cusrom>0?(o.checked="checked",_.classList.remove("hidden"),m.hide_cusrom==1?(n.value="0",t.classList.remove("hidden")):m.hide_cusrom==2?(n.value="25",a.classList.remove("hidden")):m.hide_cusrom==3?(n.value="50",l.classList.remove("hidden")):m.hide_cusrom==4?(n.value="75",f.classList.remove("hidden")):m.hide_cusrom==5&&(n.value="100",g.classList.remove("hidden"))):(o.checked=!1,_.classList.add("hidden")),m.hide_vendor_sepolicy==!0?c.checked="checked":c.checked=!1,m.hide_compat_matrix==!0?r.checked="checked":r.checked=!1,m.fake_service_list==!0?b.checked="checked":b.checked=!1,o.addEventListener("click",async function(){const h=document.getElementById("custom_rom_levels");m.hide_cusrom>0?(e(`sed -i 's/hide_cusrom=.*/hide_cusrom=0/' ${d}/config.sh`),m.hide_cusrom=0,h.classList.add("hidden"),t.classList.add("hidden"),a.classList.add("hidden"),l.classList.add("hidden"),f.classList.add("hidden"),g.classList.add("hidden"),i("Reboot to take effect")):(e(`sed -i 's/hide_cusrom=.*/hide_cusrom=1/' ${d}/config.sh`),n.value="0",m.hide_cusrom=1,h.classList.remove("hidden"),t.classList.remove("hidden"),i("Reboot to take effect"))}),n.addEventListener("change",async function(){n.value=="0"?(e(`sed -i 's/hide_cusrom=.*/hide_cusrom=1/' ${d}/config.sh`),t.classList.remove("hidden"),a.classList.add("hidden"),l.classList.add("hidden"),f.classList.add("hidden"),g.classList.add("hidden")):n.value=="25"?(e(`sed -i 's/hide_cusrom=.*/hide_cusrom=2/' ${d}/config.sh`),t.classList.add("hidden"),a.classList.remove("hidden"),l.classList.add("hidden"),f.classList.add("hidden"),g.classList.add("hidden")):n.value=="50"?(e(`sed -i 's/hide_cusrom=.*/hide_cusrom=3/' ${d}/config.sh`),t.classList.add("hidden"),a.classList.add("hidden"),l.classList.remove("hidden"),f.classList.add("hidden"),g.classList.add("hidden")):n.value=="75"?(e(`sed -i 's/hide_cusrom=.*/hide_cusrom=4/' ${d}/config.sh`),t.classList.add("hidden"),a.classList.add("hidden"),l.classList.add("hidden"),f.classList.remove("hidden"),g.classList.add("hidden")):n.value=="100"&&(e(`sed -i 's/hide_cusrom=.*/hide_cusrom=5/' ${d}/config.sh`),t.classList.add("hidden"),a.classList.add("hidden"),l.classList.add("hidden"),f.classList.add("hidden"),g.classList.remove("hidden"))}),c.addEventListener("click",async function(){m.hide_vendor_sepolicy==!0?(e(`sed -i 's/hide_vendor_sepolicy=1/hide_vendor_sepolicy=0/' ${d}/config.sh`),m.hide_vendor_sepolicy=!1,i("Reboot to take effect")):(e(`sed -i 's/hide_vendor_sepolicy=0/hide_vendor_sepolicy=1/' ${d}/config.sh`),m.hide_vendor_sepolicy=!0,i("Reboot to take effect"))}),r.addEventListener("click",async function(){m.hide_compat_matrix==!0?(e(`sed -i 's/hide_compat_matrix=1/hide_compat_matrix=0/' ${d}/config.sh`),m.hide_compat_matrix=!1,i("Reboot to take effect")):(e(`sed -i 's/hide_compat_matrix=0/hide_compat_matrix=1/' ${d}/config.sh`),m.hide_compat_matrix=!0,i("Reboot to take effect"))}),b.addEventListener("click",async function(){m.fake_service_list==!0?(e(`sed -i 's/fake_service_list=1/fake_service_list=0/' ${d}/config.sh`),m.fake_service_list=!1,i("Reboot to take effect")):(e(`sed -i 's/fake_service_list=0/fake_service_list=1/' ${d}/config.sh`),m.fake_service_list=!0,i("Reboot to take effect"))})}async function $e(){const s=document.getElementById("sus_path_section"),o=document.getElementById("load_sus_path"),_=document.getElementById("custom_sus_path"),n=document.getElementById("save_sus_path");if(E.includes("CONFIG_KSU_SUSFS_SUS_PATH")==!1){s.classList.add("hidden");return}o.addEventListener("click",async()=>{_.innerHTML=await e(`cat ${d}/sus_path.txt`)}),n.addEventListener("click",async()=>{var t=_.value;t==""?i("please press load first!"):(await e(`echo '${t}' > ${d}/sus_path.txt`),i("Custom SUS_PATH saved!"),i("Reboot to take effect"))})}async function Be(){const s=document.getElementById("load_sus_path_loop"),o=document.getElementById("custom_sus_path_loop"),_=document.getElementById("save_sus_path_loop"),n=document.getElementById("sus_path_loop_section");if(u.main>=1&&u.sub>=5&&u.patch>=9||u.main>=2)n.classList.remove("hidden");else return;s.addEventListener("click",async()=>{o.innerHTML=await e(`cat ${d}/sus_path_loop.txt`)}),_.addEventListener("click",async()=>{var t=o.value;t==""?i("please press load first!"):(await e(`echo '${t}' > ${d}/sus_path_loop.txt`),i("Custom SUS_PATH_LOOP saved!"),i("Reboot to take effect"))})}async function Te(s){const o=document.getElementById("sus_maps_section"),_=document.getElementById("load_sus_maps"),n=document.getElementById("custom_sus_maps"),t=document.getElementById("save_sus_maps");if(s.includes("CONFIG_KSU_SUSFS_SUS_MAP"))o.classList.remove("hidden");else return;_.addEventListener("click",async()=>{n.innerHTML=await e(`cat ${d}/sus_maps.txt`)}),t.addEventListener("click",async()=>{var a=n.value;a==""?i("please press load first!"):(await e(`echo '${a}' > ${d}/sus_maps.txt`),i("Custom SUS_MAPS saved!"),i("Reboot to take effect"))})}async function Oe(){const s=document.getElementById("sus_mount_section"),o=document.getElementById("load_sus_mount"),_=document.getElementById("custom_sus_mount"),n=document.getElementById("save_sus_mount");if(E.includes("CONFIG_KSU_SUSFS_SUS_MOUNT")==!1||u.main>=2){s.classList.add("hidden");return}o.addEventListener("click",async()=>{_.innerHTML=await e(`cat ${d}/sus_mount.txt`)}),n.addEventListener("click",async()=>{var t=_.value;t==""?i("please press load first!"):(await e(`echo '${t}' > ${d}/sus_mount.txt`),i("Custom SUS_MOUNT saved!"),i("Reboot to take effect"))})}async function Ne(){const s=document.getElementById("try_umount_section"),o=document.getElementById("load_try_umount"),_=document.getElementById("custom_try_umount"),n=document.getElementById("save_try_umount"),t=document.querySelector("main");if(E.includes("CONFIG_KSU_SUSFS_TRY_UMOUNT")==!1&&u.main<2){s.classList.add("hidden");return}o.addEventListener("click",async()=>{_.innerHTML=await e(`cat ${d}/try_umount.txt`)}),n.addEventListener("click",async()=>{var a=_.value;a==""?i("please press load first!"):(await e(`echo '${a}' > ${d}/try_umount.txt`),i("Custom TRY_UMOUNT saved!"),i("Reboot to take effect"))}),_.addEventListener("focus",()=>{t.style.paddingBottom="300px",_.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}),_.addEventListener("blur",()=>{N.to(t,{duration:.5,paddingBottom:"0px",ease:"power1.out"})})}async function Fe(s){const o=[{id:"status_sus_path",config:"CONFIG_KSU_SUSFS_SUS_PATH"},{id:"status_sus_map",config:"CONFIG_KSU_SUSFS_SUS_MAP"},{id:"status_sus_mount",config:"CONFIG_KSU_SUSFS_SUS_MOUNT"},{id:"status_auto_default_mount",config:"CONFIG_KSU_SUSFS_AUTO_ADD_SUS_KSU_DEFAULT_MOUNT"},{id:"status_auto_bind_mount",config:"CONFIG_KSU_SUSFS_AUTO_ADD_SUS_BIND_MOUNT"},{id:"status_sus_kstat",config:"CONFIG_KSU_SUSFS_SUS_KSTAT"},{id:"status_try_umount",config:"CONFIG_KSU_SUSFS_TRY_UMOUNT"},{id:"status_auto_try_umount_bind",config:"CONFIG_KSU_SUSFS_AUTO_ADD_TRY_UMOUNT_FOR_BIND_MOUNT"},{id:"status_spoof_uname",config:"CONFIG_KSU_SUSFS_SPOOF_UNAME"},{id:"status_enable_log",config:"CONFIG_KSU_SUSFS_ENABLE_LOG"},{id:"status_hide_symbols",config:"CONFIG_KSU_SUSFS_HIDE_KSU_SUSFS_SYMBOLS"},{id:"status_spoof_cmdline",config:"CONFIG_KSU_SUSFS_SPOOF_CMDLINE_OR_BOOTCONFIG"},{id:"status_open_redirect",config:"CONFIG_KSU_SUSFS_OPEN_REDIRECT"},{id:"status_magic_mount",config:"CONFIG_KSU_SUSFS_HAS_MAGIC_MOUNT"},{id:"status_overlayfs_auto_kstat",config:"CONFIG_KSU_SUSFS_SUS_OVERLAYFS"}],_=[{id:"status_overlayfs_auto_kstat",config:"CONFIG_KSU_SUSFS_SUS_OVERLAYFS",version_main:1,version_sub:5,version_patch:8},{id:"status_magic_mount",config:"CONFIG_KSU_SUSFS_HAS_MAGIC_MOUNT",version_main:1,version_sub:5,version_patch:11},{id:"status_auto_try_umount_bind",config:"CONFIG_KSU_SUSFS_AUTO_ADD_TRY_UMOUNT_FOR_BIND_MOUNT",version_main:2,version_sub:0,version_patch:0},{id:"status_auto_default_mount",config:"CONFIG_KSU_SUSFS_AUTO_ADD_SUS_KSU_DEFAULT_MOUNT",version_main:2,version_sub:0,version_patch:0},{id:"status_auto_bind_mount",config:"CONFIG_KSU_SUSFS_AUTO_ADD_SUS_BIND_MOUNT",version_main:2,version_sub:0,version_patch:0},{id:"status_try_umount",config:"CONFIG_KSU_SUSFS_TRY_UMOUNT",version_main:2,version_sub:0,version_patch:0}];for(const n of o)try{const t=s.includes(n.config),a=document.getElementById(n.id);if(a){const l=a.querySelector("span");t?(a.className="badge badge-sm badge-success text-sm ml-4",l.textContent="Enabled",l.setAttribute("data-i18n","enabled_label")):_.some(f=>f.id===n.id&&(u.main>f.version_main||u.main>=f.version_main&&u.sub>=f.version_sub&&u.patch>=f.version_patch))?(a.className="badge badge-sm badge-secondary text-sm ml-4",l.textContent="Deprecated",l.setAttribute("data-i18n","deprecated_label")):(a.className="badge badge-sm badge-error text-sm ml-4",l.textContent="Disabled",l.setAttribute("data-i18n","disabled_label"))}}catch{const a=document.getElementById(n.id);if(a){const l=a.querySelector("span");a.className="badge badge-sm badge-warning text-sm ml-4",l.textContent="Unknown",l.setAttribute("data-i18n","unknown_label")}}}function W(){const s=document.getElementById("susfs_reset"),o=document.getElementById("confirm_reset_modal"),_=document.getElementById("reset_modal_confirm"),n=document.getElementById("reset_modal_cancel");s.addEventListener("click",async function(t){t.preventDefault(),o.showModal()}),n.addEventListener("click",async function(){o.close()}),_.addEventListener("click",async function(){i("Resetting..."),await e(`sh ${T}/susfs_reset.sh`),o.close(),i("Reset done! Please reboot"),await e("input keyevent 4")})}function j(){document.getElementById("susfs_send_logs").addEventListener("click",async function(o){try{await e("cat /proc/$(pidof zygote64)/mountinfo > /data/adb/ksu/susfs4ksu/zygote64_mountinfo.txt"),await e("cat /proc/$(pidof zygote64)/maps > /data/adb/ksu/susfs4ksu/zygote64_maps.txt"),await e("cat /proc/1/mountinfo > /data/adb/ksu/susfs4ksu/pid1_mountinfo.txt"),await e("cp /data/adb/ksu/log/dmesg.log /data/adb/ksu/susfs4ksu/dmesg.log"),await e("ksud module list > /data/adb/ksu/susfs4ksu/ksu_module_list.txt"),await e("dmesg | grep susfs > /data/adb/ksu/susfs4ksu/latest_dmesg_susfs.log"),await e("tar -C /data/adb/ksu/susfs4ksu/ -czvf /sdcard/susfs_logs.tar.gz ."),i("Logs saved to /sdcard/susfs_logs.tar.gz"),await e("am start -a android.intent.action.SEND -t '*/*' -c android.intent.category.DEFAULT --eu android.intent.extra.STREAM 'file:///sdcard/susfs_logs.tar.gz'")}catch(_){i("Failed to prepare logs: "+_.message)}})}function J(){document.getElementById("susfs_export").addEventListener("click",async function(o){try{await e("tar -C /data/adb/susfs4ksu/ -czvf /sdcard/susfs_settings.tar.gz ."),i("Settings exported to /sdcard/susfs_settings.tar.gz")}catch{i("Failed to export settings")}})}j();J();W();V(I);q(I);I.disable_webui_bin_update==!1&&await e(`sh ${T}/susfs-bin-check.sh ${u.main.toString()} ${u.sub.toString()} ${u.patch.toString()} ${R.toLowerCase()}`)=="mismatch"&&Ie(u,R);
